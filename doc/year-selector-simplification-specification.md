# 年変更ボタン簡略化仕様書

## 1. ドキュメント情報

- **作成日**: 2026年2月7日
- **対象コンポーネント**: YearSelector (`src/app/components/YearSelector.tsx`)
- **対象画面**: 配当ポートフォリオ画面 (`/portfolio`)
- **対象読者**: 開発者、UI/UXデザイナー、プロジェクト関係者

---

## 2. 変更概要

### 2.1 背景

現在、配当ポートフォリオ画面の年変更ボタンは以下のように表示されています：

- 前年ボタン: **「< 前年」**
- 次年ボタン: **「次年 >」**

スマートフォン画面での表示時に、漢字部分（「前年」「次年」）が以下の課題を引き起こしています：

1. **スペース効率**: モバイル画面では限られた横幅の中で、漢字部分が貴重なスペースを占有
2. **視覚的な煩雑さ**: テキストと記号の組み合わせが視覚的に情報過多
3. **国際化への配慮**: 記号のみの表示は言語に依存しない普遍的なUIとなる

### 2.2 変更目的

年変更ボタンのテキストを簡略化し、記号のみで意図を伝えることで、以下を実現します：

- モバイル表示時のスペース効率向上
- よりクリーンでモダンなUI
- 直感的な操作性の維持（記号で十分に意図が伝わる）

---

## 3. 提案仕様

### 3.1 変更内容

#### 変更前
```tsx
<button aria-label="前年">
    &lt; 前年
</button>

<button aria-label="次年">
    次年 &gt;
</button>
```

#### 変更後（案）
```tsx
<button aria-label="前年">
    &lt;
</button>

<button aria-label="次年">
    &gt;
</button>
```

### 3.2 代替案の検討

#### 案1: シングル矢印記号のみ（推奨）
- 表示: **「<」** と **「>」**
- メリット:
  - 最もシンプルで直感的
  - スペース効率が最大
  - 多くのWebサービスで採用されている標準的なUI
- デメリット:
  - 初見のユーザーには説明が必要な可能性（極めて低い）

#### 案2: ダブル矢印記号
- 表示: **「<<」** と **「>>」**
- メリット:
  - より強い方向性の表現
  - ページ送り機能との差別化
- デメリット:
  - 視覚的にやや重たい印象
  - 年単位の移動には過剰な表現の可能性

#### 案3: Unicodeの矢印記号
- 表示: **「◀」** と **「▶」**
- メリット:
  - 視認性が高い
  - モダンなデザイン
- デメリット:
  - フォントによって表示が異なる可能性
  - HTMLエンティティ（&lt;/&gt;）と比較して安定性に欠ける

#### 案4: 絵文字
- 表示: **「⬅️」** と **「➡️」**
- メリット:
  - 視覚的にわかりやすい
  - カラフルで親しみやすい
- デメリット:
  - デザインの統一性を損なう可能性
  - ビジネスアプリケーションには不適切

### 3.3 推奨案の選定理由

**案1（シングル矢印記号のみ）を推奨**します。理由は以下の通りです：

1. **Web標準**: ページネーションやカルーセルなど、多くのWebサービスで採用されている
2. **直感性**: ユーザーにとって「<」「>」の意味は自明
3. **シンプルさ**: 余計な要素がなく、視覚的にクリーン
4. **技術的安定性**: HTMLエンティティとして広くサポートされている
5. **アクセシビリティ**: aria-labelで適切な説明を提供できる

---

## 4. 実装詳細

### 4.1 変更対象ファイル

1. **src/app/components/YearSelector.tsx**
   - ボタンテキストの変更
   - aria-label属性は維持（アクセシビリティ確保）

2. **__tests__/src/app/components/YearSelector.test.tsx**
   - テストケースの更新（期待値の変更）

### 4.2 実装方針

#### コンポーネントの変更

```tsx
// 変更前
<button
    onClick={handlePrevYear}
    disabled={!hasPrevYear}
    className={...}
    aria-label="前年"
>
    &lt; 前年
</button>

// 変更後
<button
    onClick={handlePrevYear}
    disabled={!hasPrevYear}
    className={...}
    aria-label="前年"
>
    &lt;
</button>
```

**重要な考慮事項:**
- `aria-label`属性は**変更しない**
  - スクリーンリーダーユーザーのために、日本語の説明を保持
  - アクセシビリティを損なわない
- ボタンのサイズや余白は既存の`className`で調整済み

#### テストの更新

```tsx
// 変更前
expect(screen.getByText('< 前年')).toBeInTheDocument();
expect(screen.getByText('次年 >')).toBeInTheDocument();

// 変更後
expect(screen.getByText('<')).toBeInTheDocument();
expect(screen.getByText('>')).toBeInTheDocument();
```

### 4.3 スタイリングの確認事項

現在のTailwind CSSクラス設定：
- `px-4 py-2`: 適切な余白が確保されている
- `rounded-lg`: 角丸のボタンデザイン
- `font-medium`: 記号のみでも視認性を確保

記号のみになってもボタンサイズは維持されるため、タップ領域は変わりません。

---

## 5. ユーザーへの影響分析

### 5.1 既存ユーザー

**影響レベル**: 低

- **学習コスト**: ほぼゼロ（「<」「>」は直感的）
- **操作性**: 変更なし（ボタン位置とサイズは同じ）
- **視覚的変化**: よりシンプルになるため、ポジティブな印象

### 5.2 新規ユーザー

**影響レベル**: なし

- 初めて使用するユーザーにとって、「<」「>」の意味は自明
- 多くのWebサービスと同じUIパターンのため、混乱は生じない

### 5.3 アクセシビリティ

**影響レベル**: なし

- `aria-label`属性により、スクリーンリーダーでは引き続き「前年」「次年」と読み上げられる
- キーボード操作は変更なし

---

## 6. モバイル表示の改善効果

### 6.1 レイアウト比較

#### 変更前
```
[< 前年]  2026年  [次年 >]
  ↑                   ↑
約80px             約80px
```

#### 変更後
```
  [<]    2026年    [>]
  ↑                 ↑
約50px            約50px
```

**削減効果**: 各ボタンで約30pxの横幅削減（合計60px）

### 6.2 スマートフォン画面（360px幅）での効果

- **変更前**: ボタン2つで約160px → 残り約200pxが年表示とマージン
- **変更後**: ボタン2つで約100px → 残り約260pxが年表示とマージン

年表示やマージンにより多くのスペースを割り当てられるため、バランスの良いレイアウトが実現できます。

---

## 7. 実装スケジュール

### 7.1 作業ステップ

1. **仕様書作成** ✅（本ドキュメント）
2. **実装**
   - YearSelector.tsxの変更
   - テストファイルの更新
3. **テスト実行**
   - ユニットテスト
   - ビルド検証
   - ビジュアルテスト（デスクトップ/モバイル）
4. **コードレビュー**
5. **マージ & デプロイ**

### 7.2 品質保証

- [ ] ユニットテストが全てパス
- [ ] ビルドエラーがないことを確認
- [ ] デスクトップブラウザでの表示確認
- [ ] モバイルブラウザでの表示確認
- [ ] スクリーンリーダーでの動作確認

---

## 8. 今後の拡張性

### 8.1 多言語対応

記号のみの表示は、将来的な国際化（i18n）対応において有利です：

- 記号自体は言語に依存しない
- `aria-label`のみを各言語に翻訳すれば良い

### 8.2 デザインシステムへの統合

このシンプルな矢印ボタンパターンは、他のナビゲーション要素にも適用可能です：

- カルーセル
- ページネーション
- 月次データの切り替え

---

## 9. まとめ

### 9.1 変更点

- 年変更ボタンのテキストを「< 前年」「次年 >」から「<」「>」に簡略化

### 9.2 期待される効果

1. **スペース効率の向上**: モバイル画面で約60px（合計）の横幅削減
2. **視覚的なシンプルさ**: よりクリーンでモダンなUI
3. **アクセシビリティの維持**: aria-labelにより機能性は変わらず

### 9.3 リスク

- **最小限**: 「<」「>」は広く認知されたUIパターンのため、ユーザーの混乱はほぼ発生しない

### 9.4 推奨事項

**実装を推奨します**。この変更は、UIの簡素化とスペース効率の向上を実現し、ユーザー体験を損なうことなく改善できます。

---

## 10. 参考資料

### 10.1 類似事例

多くの主要Webサービスで、ページネーションやナビゲーションに記号のみのボタンが採用されています：

- **Google検索**: ページネーションに「<」「>」を使用
- **Amazon**: 商品カルーセルに矢印記号のみ
- **YouTube**: 動画リストのナビゲーションに矢印のみ

### 10.2 UIデザイン原則

- **認知負荷の低減**: 記号のみの方が視覚的にシンプルで処理しやすい
- **ミニマリズム**: 必要最小限の要素で目的を達成
- **普遍性**: 言語や文化に依存しない

---

## 付録: 実装時に想定される変更差分

本仕様書はあくまでUI仕様の定義であり、ここで記載する内容は「実装時に想定される変更箇所／影響範囲のイメージ」です。  
実際のPRでは、実装内容に応じてファイル数・変更行数・影響範囲が増減する可能性があります。

### 想定される主な変更ファイル
- `src/app/components/YearSelector.tsx`
- `__tests__/src/app/components/YearSelector.test.tsx`

### 想定される変更内容のイメージ
- YearSelectorコンポーネントの表示テキスト（前年/次年ボタンのラベル）変更が中心
- テストコードは、表示テキストに依存するアサーションのみを更新する想定
- 既存の年変更ロジックそのものは変更しない方針

### 想定される影響範囲とリスク
- 影響は配当ポートフォリオ画面のUI表示を主とする想定
- 実際の影響範囲およびリスク評価は、実装時・レビュー時にあらためて行う
